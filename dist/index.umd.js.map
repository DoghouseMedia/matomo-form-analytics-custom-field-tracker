{"version":3,"file":"index.umd.js","sources":["../src/Enums/FieldCategories.js","../src/CustomFields/BaseField.js","../src/CustomFields/WysiwygField.js","../src/CustomFields/RatingField.js","../src/CustomFields/ImageSelectorField.js","../src/CustomFields/index.js","../src/FormAnalyticsCustomFieldTracker.js"],"sourcesContent":["/**\n * Field Categories Enum\n *\n * Defines the three field categories supported by Matomo FormAnalytics\n * - FIELD_TEXT: Text-based input fields\n * - FIELD_SELECTABLE: Selection-based fields\n * - FIELD_CHECKABLE: Checkbox/radio fields\n *\n * @enum {string}\n */\nexport const FieldCategories = {\n    /**\n     * Text-based input fields (password, text, url, tel, email, search, textarea)\n     */\n    TEXT: 'FIELD_TEXT',\n    /**\n     * Selection-based fields (color, date, datetime, datetime-local, month, number, range, time, week, select)\n     */\n    SELECTABLE: 'FIELD_SELECTABLE',\n    /**\n     * Checkbox/radio fields (radio, checkbox)\n     */\n    CHECKABLE: 'FIELD_CHECKABLE'\n};\n\n/**\n * Validates if a field category is supported by Matomo\n * @param {string} category - Field category to validate\n * @returns {boolean} True if category is valid\n */\nexport function isValidFieldCategory(category) {\n    return Object.values(FieldCategories).includes(category);\n}\n\n/**\n * Gets all supported field categories\n * @returns {string[]} Array of all supported field categories\n */\nexport function getSupportedFieldCategories() {\n    return Object.values(FieldCategories);\n}\n\n/**\n * Gets field category description\n * @param {string} category - Field category\n * @returns {string} Human-readable description\n */\nexport function getFieldCategoryDescription(category) {\n    const descriptions = {\n        [FieldCategories.TEXT]: 'Text-based input fields (password, text, url, tel, email, search, textarea)',\n        [FieldCategories.SELECTABLE]: 'Selection-based fields (color, date, datetime, datetime-local, month, number, range, time, week, select)',\n        [FieldCategories.CHECKABLE]: 'Checkbox/radio fields (radio, checkbox)'\n    };\n\n    return descriptions[category] || 'Unknown field category';\n}\n","import { FieldCategories } from '../Enums/FieldCategories.js';\n\n/**\n * BaseField Class\n *\n * A reusable abstract class providing shared tracking logic\n * for all custom form field types (e.g., WYSIWYG, rating, image selector).\n *\n * @class BaseField\n * @abstract\n */\nexport class BaseField {\n    /**\n     * Field Categories ENUM - Available to all subclasses\n     * @static\n     */\n    static FieldCategories = FieldCategories;\n\n    /**\n     * Required static properties for field classes:\n     * \n     * @static {string} fieldType - Unique identifier for the field type (e.g., 'wysiwyg', 'rating')\n     * @static {string} category - Field category from FieldCategories enum\n     * @static {string} selector - CSS selector to find elements for this field type (required for automatic detection)\n     * \n     * Example:\n     * static fieldType = 'myField';\n     * static category = BaseField.FieldCategories.TEXT;\n     * static selector = '.my-field[data-name]';\n     */\n\n    /**\n     * Creates a new BaseField instance\n     *\n     * @param {Object} tracker - Matomo tracker instance\n     * @param {HTMLElement} element - DOM element for the field\n     * @param {string} fieldName - Unique identifier for the field\n     * @param {string} fieldType - Type of field (wysiwyg, rating, etc.)\n     * @param {string} category - Matomo field category (FIELD_TEXT, FIELD_SELECTABLE, etc.)\n     */\n    constructor(tracker, element, fieldName) {\n        // Get fieldType and category from static properties\n        const fieldType = this.constructor.fieldType;\n        const category = this.constructor.category;\n        const selector = this.constructor.selector;\n\n        if (!fieldType || !category) {\n            throw new Error(`${this.constructor.name} must define static fieldType and category properties`);\n        }\n\n        if (!selector) {\n            throw new Error(`${this.constructor.name} must define a static selector property for automatic field detection`);\n        }\n\n        // Common properties for all field types\n        this.discoveredDate = Date.now();\n        this.timespent = 0;\n        this.hesitationtime = 0;\n        this.nodes = [element];\n        this.tagName = 'div';\n        this.fieldName = fieldName;\n        this.fieldType = fieldType;\n        this.startFocus = null;\n        this.timeLastChange = null;\n        this.numChanges = 0;\n        this.numFocus = 0;\n        this.numDeletes = 0;\n        this.numCursor = 0;\n        this.canCountChange = true;\n        this.isFocusedCausedAuto = false;\n        this.hasChangedValueSinceFocus = false;\n        this.tracker = tracker;\n        this.category = category;\n\n        // Store references for field-specific implementations\n        this.element = element;\n\n        // // Set up event listeners for all custom fields\n        // this.setupEventListeners();\n    }\n\n    /**\n     * Abstract method: Gets the interactive element for this field\n     * Must be implemented by subclasses to define their interactive element\n     * @abstract\n     * @returns {HTMLElement|NodeList} Interactive element for this field\n     * @throws {Error} If not implemented by subclass\n     */\n    getInteractiveElement() {\n        throw new Error(`getInteractiveElement() must be implemented by ${this.fieldType} field`);\n    }\n\n    /**\n     * Abstract method: Determines if field is blank/empty\n     * Must be implemented by subclasses\n     * @abstract\n     * @returns {boolean} True if field is blank, false otherwise\n     * @throws {Error} If not implemented by subclass\n     */\n    isBlank() {\n        throw new Error(`isBlank() must be implemented by ${this.fieldType} field`);\n    }\n\n    /**\n     * Abstract method: Gets field size/content length\n     * Must be implemented by subclasses\n     * @abstract\n     * @returns {number} Field size (content length, rating value, etc.)\n     * @throws {Error} If not implemented by subclass\n     */\n    getFieldSize() {\n        throw new Error(`getFieldSize() must be implemented by ${this.fieldType} field`);\n    }\n\n    /**\n     * Sets up event listeners for all custom field types\n     * This method provides common event handling for all custom fields\n     * Can be overridden by subclasses for custom event handling\n     */\n    setupEventListeners() {\n        // Check if the subclass has overridden this method.\n        if (this.constructor.prototype.setupEventListeners !== BaseField.prototype.setupEventListeners) {\n            // Subclass has its own implementation, call it\n            this.constructor.prototype.setupEventListeners.call(this);\n            return;\n        }\n\n        // Default implementation for fields that don't override\n        this.setupDefaultEventListeners();\n    }\n\n    /**\n     * Sets up default event listeners for standard field types\n     * Used by fields that don't need custom event handling\n     */\n    setupDefaultEventListeners() {\n        // Get the actual interactive element (overridden by subclasses)\n        const interactiveElement = this.getInteractiveElement();\n\n        if (!interactiveElement) {\n            console.error(`${this.fieldType.toUpperCase()} interactive element not found:`, this.element);\n            return;\n        }\n\n        // Focus event\n        interactiveElement.addEventListener('focus', () => {\n            this.onFocus();\n        });\n\n        // Blur event\n        interactiveElement.addEventListener('blur', () => {\n            this.onBlur();\n        });\n\n        // Input event (typing)\n        interactiveElement.addEventListener('input', () => {\n            this.onChange();\n        });\n\n        // Keydown event (cursor movements, deletions)\n        interactiveElement.addEventListener('keydown', (event) => {\n            this.handleKeydown(event);\n        });\n\n        // Click event (cursor movements)\n        interactiveElement.addEventListener('click', () => {\n            this.trackCursorMovement();\n            console.log(`⚡️ ${this.fieldType.toUpperCase()} click:`, this.fieldName);\n        });\n    }\n\n    /**\n     * Handles keydown events for cursor and deletion tracking\n     * Tracks arrow keys, home/end, and backspace/delete\n     * @param {KeyboardEvent} event - Keyboard event object\n     */\n    handleKeydown(event) {\n        // Track cursor movements\n        const cursorKeys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Home', 'End', 'PageUp', 'PageDown'];\n        if (cursorKeys.includes(event.key)) {\n            this.trackCursorMovement();\n            console.log(`${this.fieldType.toUpperCase()} cursor movement:`, event.key);\n        }\n\n        // Track deletions\n        if (event.key === 'Backspace' || event.key === 'Delete') {\n            this.trackDeletion();\n            console.log(`${this.fieldType.toUpperCase()} deletion:`, event.key);\n        }\n    }\n\n    /**\n     * Adds a DOM node to this field's node collection\n     * @param {HTMLElement} node - DOM node to add\n     */\n    addNode(node) {\n        this.nodes.push(node);\n    }\n\n    /**\n     * Resets all tracking counters when form is submitted\n     * Called automatically by Matomo tracker on form submission\n     */\n    resetOnFormSubmit() {\n        this.timespent = 0;\n        this.numFocus = 0;\n        this.numDeletes = 0;\n        this.numCursor = 0;\n        this.numChanges = 0;\n        this.startFocus = null;\n        this.timeLastChange = null;\n        this.canCountChange = true;\n        this.hasChangedValueSinceFocus = false;\n        this.isFocusedCausedAuto = false;\n    }\n\n    /**\n     * Calculates total time spent in this field\n     * Includes both tracked time and current session time\n     * @returns {number} Time spent in milliseconds\n     */\n    getTimeSpent() {\n        if (this.numChanges && !this.timespent) {\n            this.timespent = 1;\n        }\n        if (!this.startFocus || this.isFocusedCausedAuto) {\n            return this.timespent;\n        }\n        if (this.timeLastChange) {\n            const timeSpent = this.timeLastChange - this.startFocus;\n            return this.timespent + (timeSpent > 0 ? timeSpent : 0);\n        }\n        return this.timespent + (Date.now() - this.startFocus);\n    }\n\n    /**\n     * Calculates hesitation time before first interaction\n     * Time from field detection to first user interaction\n     * @returns {number} Hesitation time in milliseconds\n     */\n    getHesitationTime() {\n        if (this.numChanges || !this.startFocus || this.isFocusedCausedAuto) {\n            return this.hesitationtime;\n        }\n        return this.hesitationtime + (Date.now() - this.startFocus);\n    }\n\n    /**\n     * Generates tracking parameters for Matomo FormAnalytics\n     * Returns all field metrics in Matomo-compatible format\n     * @returns {Object} Object containing all tracking parameters\n     */\n    getTrackingParams() {\n        return {\n            fa_fn: this.fieldName,\n            fa_ft: this.fieldType,\n            fa_fs: this.getFieldSize(),\n            fa_fb: this.isBlank() ? 1 : 0,\n            fa_fts: this.getTimeSpent(),\n            fa_fht: this.getHesitationTime(),\n            fa_ff: this.numFocus,\n            fa_fch: this.numChanges,\n            fa_fd: this.numDeletes,\n            fa_fcu: this.numCursor\n        };\n    }\n\n    /**\n     * Handles field focus event\n     * Tracks focus count, sets entry field, and triggers Matomo tracking\n     */\n    onFocus() {\n        console.log(`⚡️ ${this.fieldType.toUpperCase()} focus (${this.fieldName})`);\n        this.startFocus = Date.now();\n        const isNewField = this.fieldName !== this.tracker.lastFocusedFieldName;\n\n        if (isNewField && !this.isFocusedCausedAuto) {\n            this.numFocus++;\n            this.tracker.setEngagedWithForm();\n            this.tracker.trackFieldUpdate(this);\n            this.tracker.exitFieldName = this.fieldName;\n            this.tracker.scheduleSendUpdate();\n        }\n\n        this.tracker.lastFocusedFieldName = this.fieldName;\n        this.canCountChange = true;\n    }\n\n    /**\n     * Handles field blur event\n     * Calculates time spent and updates tracking data\n     */\n    onBlur() {\n        console.log(`⚡️ ${this.fieldType.toUpperCase()} blur (${this.fieldName})`);\n        if (!this.startFocus) return;\n\n        if (this.hasChangedValueSinceFocus) {\n            if (this.timeLastChange && this.startFocus) {\n                this.timespent += (this.timeLastChange - this.startFocus);\n            }\n            this.timeLastChange = null;\n            this.startFocus = null;\n            return;\n        }\n\n        if (!this.isFocusedCausedAuto) {\n            const now = Date.now();\n            this.timespent += now - this.startFocus;\n            if (!this.numChanges) {\n                this.hesitationtime += now - this.startFocus;\n            }\n            this.tracker.setEngagedWithForm();\n            this.tracker.trackFieldUpdate(this);\n        }\n        this.startFocus = null;\n    }\n\n    /**\n     * Handles field change event\n     * Tracks changes, hesitation time, and sets entry field\n     */\n    onChange() {\n        console.log(`⚡️ ${this.fieldType.toUpperCase()} changed (${this.fieldName})`);\n        this.timeLastChange = Date.now();\n        if (this.isFocusedCausedAuto) {\n            this.startFocus = this.timeLastChange;\n        } else if (!this.startFocus) {\n            return;\n        }\n\n        this.isFocusedCausedAuto = false;\n        this.hasChangedValueSinceFocus = true;\n\n        if (!this.numChanges) {\n            this.hesitationtime += this.timeLastChange - this.startFocus;\n        }\n\n        if (this.canCountChange) {\n            this.numChanges++;\n            this.canCountChange = false;\n        }\n\n        if (!this.tracker.entryFieldName) {\n            this.tracker.entryFieldName = this.fieldName;\n        }\n\n        this.tracker.setEngagedWithForm();\n        this.tracker.trackFieldUpdate(this);\n    }\n\n    /**\n     * Helper method for tracking cursor movements\n     * Increments cursor count for arrow keys, clicks, etc.\n     */\n    trackCursorMovement() {\n        this.numCursor++;\n    }\n\n    /**\n     * Helper method for tracking deletions\n     * Increments delete count for backspace, delete keys, etc.\n     */\n    trackDeletion() {\n        this.numDeletes++;\n    }\n}\n","import { BaseField } from './BaseField.js';\n\n/**\n * WYSIWYG Field Creator\n * Handles contenteditable div elements with ProseMirror editor\n *\n * @class WysiwygField\n * @extends BaseField\n */\nexport class WysiwygField extends BaseField {\n    static fieldType = 'wysiwyg';\n    static category = BaseField.FieldCategories.TEXT;\n    static selector = '.formulate-input-element--wysiwyg[data-name]';\n\n    /**\n     * @inheritDoc\n     */\n    constructor(tracker, element, fieldName) {\n        super(tracker, element, fieldName);\n        this.editor = this.getInteractiveElement();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getInteractiveElement() {\n        return this.element.querySelector('.ProseMirror[contenteditable=\"true\"]');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    isBlank() {\n        if (!this.editor) return true;\n        const content = this.editor.innerText || this.editor.textContent || '';\n        return content.trim().length === 0;\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getFieldSize() {\n        if (!this.editor) return 0;\n        const content = this.editor.innerText || this.editor.textContent || '';\n        return content.length;\n    }\n}\n","import { BaseField } from './BaseField.js';\n\n/**\n * Rating Field Creator\n * Handles star rating elements with click-based selection\n *\n * @class RatingField\n * @extends BaseField\n */\nexport class RatingField extends BaseField {\n    static fieldType = 'rating';\n    static category = BaseField.FieldCategories.SELECTABLE;\n    static selector = '.formulate-input-element--rating-container[data-name]';\n\n    /**\n     * @inheritDoc\n     */\n    constructor(tracker, element, fieldName) {\n        super(tracker, element, fieldName);\n        this.stars = this.getInteractiveElement();\n        this.lastRating = this.getFieldSize();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getInteractiveElement() {\n        return this.element.querySelectorAll('.star-full');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    isBlank() {\n        const filledStars = this.element.querySelectorAll('.star-full .icon-full');\n        return filledStars.length === 0;\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getFieldSize() {\n        const filledStars = this.element.querySelectorAll('.star-full .icon-full');\n        return filledStars.length;\n    }\n\n    /**\n     * Sets up custom event listeners for rating field\n     * Overrides BaseField's setupEventListeners for custom star handling\n     */\n    setupEventListeners() {\n        if (this.stars.length === 0) {\n            console.error('Rating stars not found:', this.element);\n            return;\n        }\n\n        // Set up click events on each star\n        this.stars.forEach((star, index) => {\n            star.addEventListener('click', () => {\n                this.handleStarClick(index + 1);\n            });\n        });\n    }\n\n    /**\n     * Handles star click events\n     * Tracks rating changes and deletions (rating decreases)\n     *\n     * @param {number} rating - New rating value\n     */\n    handleStarClick(rating) {\n        const prevRating = this.lastRating;\n        const newRating = rating === prevRating ? 0 : rating;\n\n        console.log(`⚡️ RATING changed from ${prevRating} to ${newRating} (${this.fieldName})`);\n        // Simulate focus if this is the first interaction with the form\n        this.onFocus();\n        // Update stored rating for next click\n        this.lastRating = newRating;\n\n        // Always track as change since something happened\n        this.onChange();\n\n        // Track rating changes as \"deletions\" if the rating decreased\n        if (newRating < prevRating) {\n            this.trackDeletion();\n            console.log(`⚡️ RATING decreased from ${prevRating} to ${newRating} (${this.fieldName})`);\n        }\n\n        // Simulate blur after a short delay to complete\n        // the focus → change → blur cycle\n        setTimeout(() => {\n            this.onBlur();\n        }, 100);\n    }\n}\n","import { BaseField } from './BaseField.js';\n\n/**\n * Image Selector Field Creator\n * Handles image selection elements with click-based selection\n *\n * @class ImageSelectorField\n * @extends BaseField\n */\nexport class ImageSelectorField extends BaseField {\n    static fieldType = 'imageSelector';\n    static category = BaseField.FieldCategories.CHECKABLE;\n    static selector = '.formulate-input-element--image_selection[data-name]';\n\n    /**\n     * @inheritDoc\n     */\n    constructor(tracker, element, fieldName) {\n        super(tracker, element, fieldName);\n        this.imageContainers = this.getInteractiveElement();\n        this.lastSelectedValue = this.getSelectedValue();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getInteractiveElement() {\n        return this.element.querySelectorAll('.engage-image-selector--container');\n    }\n\n    /**\n     * @inheritDoc\n     */\n    isBlank() {\n        // Follows Matomo's tracker logic: return false if any image is selected\n        return this.getSelectedImages().length === 0;\n    }\n\n    /**\n     * @inheritDoc\n     */\n    getFieldSize() {\n        // Follow Matomo's tracker logic: return -1 for FIELD_CHECKABLE fields\n        return -1;\n    }\n\n    /**\n     * Gets currently selected images from DOM\n     * @returns {NodeList} NodeList of selected image elements\n     */\n    getSelectedImages() {\n        return this.element.querySelectorAll('.engage-image-selector--container.selected');\n    }\n\n    /**\n     * Gets the value of the currently selected image\n     * @returns {string|null} The selected image value or null if none selected\n     */\n    getSelectedValue() {\n        const selected = this.element.querySelector('.engage-image-selector--container.selected');\n        if (!selected) return null;\n\n        const radio = selected.querySelector('input[type=\"radio\"]');\n        return radio?.value || null;\n    }\n\n    /**\n     * Sets up custom event listeners for image selector field\n     * Overrides BaseField's setupEventListeners for custom image handling\n     */\n    setupEventListeners() {\n        if (!this.imageContainers.length) {\n            console.error('Image containers not found:', this.element);\n            return;\n        }\n\n        // Set up click events on each image container\n        this.imageContainers.forEach((container, index) => {\n            container.addEventListener('click', () => this.handleImageClick(index + 1))\n        });\n    }\n\n    /**\n     * Handles image click events\n     * Tracks image selection changes and deletions (deselections)\n     *\n     * @param {number} imageIndex - Index of clicked image (1-based)\n     */\n    handleImageClick(_imageIndex) {\n        const prevSelectedValue = this.lastSelectedValue;\n        this.onFocus();\n\n        // Wait for DOM to update, then get new selected value\n        setTimeout(() => {\n            const newSelectedValue = this.getSelectedValue();\n\n            console.log(`⚡️ IMAGE SELECTOR changed from \"${prevSelectedValue}\" to \"${newSelectedValue}\" (${this.fieldName})`);\n\n            // Update stored selected value for next click\n            this.lastSelectedValue = newSelectedValue;\n\n            // Always track as change since something happened\n            this.onChange();\n\n            // Track deselections as \"deletions\" if value changed from something to null\n            if (prevSelectedValue && !newSelectedValue) {\n                this.trackDeletion();\n                console.log(`⚡️ IMAGE SELECTOR deselected (${this.fieldName})`);\n            }\n\n            // Simulate blur after a short delay to complete\n            // the focus → change → blur cycle\n            setTimeout(() => this.onBlur(), 100);\n        }, 50); // Small delay to let DOM update\n    }\n}\n","import { WysiwygField } from './WysiwygField.js';\nimport { RatingField } from './RatingField.js';\nimport { ImageSelectorField } from './ImageSelectorField.js';\n\n/**\n * Field Classes Registry\n * Maps field types to their corresponding classes\n */\nexport const fieldClasses = {\n    wysiwyg: WysiwygField,\n    rating: RatingField,\n    imageSelector: ImageSelectorField\n};\n\n/**\n * Factory function for creating fields of any type\n * Uses the factory pattern to create field instances based on type\n *\n * @param {Object} tracker - Matomo tracker instance\n * @param {HTMLElement} element - DOM element\n * @param {string} fieldName - Field identifier\n * @param {string} fieldType - Type of field to create\n * @returns {BaseField|null} Created field instance or null if type not found\n * @throws {Error} If field creation fails\n */\nexport function createField(tracker, element, fieldName, fieldType) {\n    const FieldClass = fieldClasses[fieldType];\n    if (!FieldClass) {\n        console.error(`No field class found for type: ${fieldType}`);\n        return null;\n    }\n\n    try {\n        // Verify the fieldType matches the class's static property\n        if (FieldClass.fieldType !== fieldType) {\n            console.error(`Field type mismatch: expected ${fieldType}, got ${FieldClass.fieldType}`);\n            return null;\n        }\n\n        const field = new FieldClass(tracker, element, fieldName);\n        field.setupEventListeners();\n        return field;\n    } catch (error) {\n        console.error(`Error creating ${fieldType} field:`, error);\n        return null;\n    }\n}\n\n/**\n * Get available field types\n * @returns {string[]} Array of supported field types\n */\nexport function getAvailableFieldTypes() {\n    return Object.keys(fieldClasses);\n}\n\n/**\n * Check if a field type is supported\n * @param {string} fieldType - Field type to check\n * @returns {boolean} True if supported, false otherwise\n */\nexport function isFieldTypeSupported(fieldType) {\n    return fieldType in fieldClasses;\n}\n","// Custom Field Integration for Matomo FormAnalytics\nimport { createField, fieldClasses } from './CustomFields/index.js';\n\nexport default {\n    init() {\n        (function () {\n            'use strict';\n\n            // Wait for FormAnalytics to initialize\n            window.matomoFormAnalyticsAsyncInit = function () {\n                const forms = document.querySelectorAll('form, [data-matomo-form]');\n                forms.forEach(form => {\n                    setTimeout(() => {\n                        const tracker = window.Piwik?.FormAnalytics?.element?.findFormTrackerInstance(form);\n                        if (tracker) {\n                            injectCustomFields(tracker, form);\n                        }\n                    }, 100);\n                });\n            };\n\n            function injectCustomFields(tracker, form) {\n                // Dynamically get field types and their selectors from registered field classes\n                Object.entries(fieldClasses).forEach(([fieldType, FieldClass]) => {\n                    // Check if the field class has a selector defined\n                    if (FieldClass.selector) {\n                        const fields = form.querySelectorAll(FieldClass.selector);\n                        fields.forEach(field => {\n                            const fieldName = field.getAttribute('data-name');\n                            const customField = createField(tracker, field, fieldName, fieldType);\n\n                            if (customField) {\n                                // Add to tracker\n                                tracker.fields.push(customField);\n                                tracker.fieldNodes.push(field);\n\n                                console.log(`✅ Integrated custom ${fieldType} field: ${fieldName}`);\n                            }\n                        });\n                    }\n                });\n            }\n        })();\n    }\n};\n"],"names":["FieldCategories","TEXT","SELECTABLE","CHECKABLE","isValidFieldCategory","category","Object","values","includes","getSupportedFieldCategories","getFieldCategoryDescription","descriptions","BaseField","constructor","tracker","element","fieldName","fieldType","selector","Error","name","discoveredDate","Date","now","timespent","hesitationtime","nodes","tagName","startFocus","timeLastChange","numChanges","numFocus","numDeletes","numCursor","canCountChange","isFocusedCausedAuto","hasChangedValueSinceFocus","getInteractiveElement","isBlank","getFieldSize","setupEventListeners","prototype","call","setupDefaultEventListeners","interactiveElement","console","error","toUpperCase","addEventListener","onFocus","onBlur","onChange","event","handleKeydown","trackCursorMovement","log","cursorKeys","key","trackDeletion","addNode","node","push","resetOnFormSubmit","getTimeSpent","timeSpent","getHesitationTime","getTrackingParams","fa_fn","fa_ft","fa_fs","fa_fb","fa_fts","fa_fht","fa_ff","fa_fch","fa_fd","fa_fcu","isNewField","lastFocusedFieldName","setEngagedWithForm","trackFieldUpdate","exitFieldName","scheduleSendUpdate","entryFieldName","WysiwygField","editor","querySelector","content","innerText","textContent","trim","length","RatingField","stars","lastRating","querySelectorAll","filledStars","forEach","star","index","handleStarClick","rating","prevRating","newRating","setTimeout","ImageSelectorField","imageContainers","lastSelectedValue","getSelectedValue","getSelectedImages","selected","radio","value","container","handleImageClick","_imageIndex","prevSelectedValue","newSelectedValue","fieldClasses","wysiwyg","imageSelector","createField","FieldClass","field","getAvailableFieldTypes","keys","isFieldTypeSupported","init","window","matomoFormAnalyticsAsyncInit","forms","document","form","Piwik","FormAnalytics","findFormTrackerInstance","injectCustomFields","entries","fields","getAttribute","customField","fieldNodes"],"mappings":"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"}